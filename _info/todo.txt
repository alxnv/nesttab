----- не поставить html editor wymeditor (xhtml dual license mit) -  конфликт с текущей версией jquery,
- не markitup (mit license, но не wisywig), не nicedit (mit license, но давно сделан - в 2008 году - конфликт с jquery) 
- то есть оставляю ckeditor4, но делаю его отдельно (он по copyleft лицензии)
-------------
- посмотреть, как будет работать сохранение записи при key violation in db


- BasicModel->saveStep2() - чтобы работало если не хватает места на диске

+ app.php поставил timezone Europe/Moscow
     - time() выдает время на 3 часа раньше текущего 
   ---- TOkenUploadModel->deleteOldTokens() - timeSpan почему-то выдает -4 часа вместо -1

- можно отслеживать violation ключей бд при добавлении-изменении записей
 тогда выдается сообщение mysql:
	#1062 - Duplicate entry '1-0' for key 'id2'
 (hook onDataModifyError)
 
- при добавлении-обновлении записей в несттаб - сначала записывать все данные без данных image,file,
    затем, если не было ошибок - данные image,file
 
- в методе удаления директорий - проверять на подстроку '..'

- сделать createDir with chunks 

+++++ - js __lang('Close') (сделать языковую трансляцию для js)

!!! в поле File запретить загрузку файлов с любым расширением - всегда должен быть список допустимых расширений
   (чтобы не загружали например файлы типа "php" с тем чтобы можно было их удаленно запустить на сервере)

- в следующих версиях: сделать галочку для таблиц типа "Список" и "Произвольные данные", позволяющую отображать их
   при редактировании на одном уровне с родительской записью

- в следующей версии : ckeditor - image to the right (кнопка "изображение" справа от редактора для работы с файлами изображений)

- !!! (в этой версии) Сделать регистрацию зарегистрированных пользователей 

сделать удаление поля типа File с удалением соответствующих файлов

!!! сделать cache::lock на добавление - редактирование полей таблиц

!!! при редактировании/добавлении полей в таблицах типа 'one' не вводить значение по умолчанию

!!! при удалении таблицы удалять сначала таблицу физически, и если ошибка не "таблица не существует",
  то не удалять из метаданных и выдавать ошибку

!!! сделать возможность удаления таблиц

!!! удаление из таблиц где верхний уровень - дерево:
  select where topid = ? left join on a.id = b.topid (3 Раза) limit 0, 40 
    (это записываем в массив, если у элемента нет подэлементов в дереве, то тоже можно дочерние в других таблицах
	   удалять)
 если дерево не верхний уровень, то просто select order by id desc where parent_id = ?	   

загрузка изображений - счетчик номеров директорий сделать в виде текстового файла
!!!!!! в таблицы верхнего уровня не добавлять поле parent_id и другие указывающие на родительскую таблицу

сделать объект - обработчик index.php в public каталоге, который смотрит файл .url_rewrite и при соответствии 
 записи типа preg_match передает в путь, указанный на следующей строке параметры $_GET['n_values'], равные
 результату preg_match
  - также в файле .url_rewrite могут быть комментарии, начинающиеся на #
  - записи в .url_rewrite разделяются пустой строкой

-----
можно использовать Laravel-Lang/lang
 пакет для языковой локали русской и других
 
подключить Html редактор - вроде Trix с изображениями редактор

---
в новых версиях (после 1-й):


1) полнотекстовый поиск по БД
- для полей самой таблицы указывать, включается ли это поле в поиск
- указывать строку с адресом url, на основе имен полей, с возможностью указания имени таблицы для
  родительских полей (например, "item/{yz_cat.txt_res_trans}/{txt2_res_trans}"
    (где txt2_res_trans - это поле транслита для поля txt таблицы yz_cat, таблица yz_cat является родительской
	  для текущей таблицы, txt2_res_trans - поле транслита для поля txt2 текущей таблицы)
2) предусмотреть возможность формировать вручную поле полнотекстового поиска для указанных таблиц
2.1) структура для всех формирующихся вручную данных полнотекстового поиска задается в одной единственной callback-
  функции getFullTextSearchStructure() объекта UserFullTextSearch в виде набора команд:
   $this->addInfo(string $tableName, array $childTablesNames, string $buildMethod)
    где $tableName - имя таблицы, которая является основной для индексации этого набора таблиц
	$childTablesNames - array of string - имена дочерних таблиц любого уровня для основной, данные из которых тоже
	  будут сохранятся в поле полнотекстового поиска
	$buildMethod - имя метода объекта UserFullTextSearch, который будет формировать значение поля полнотекстового
    	поиска
	  формат метода: $this->{$buildMethod}(array $thisRecord):array
	   @param array $thisRecord - содержимое записи в $tableName, для которой генерируется значение полнотекстового
	     поиска
	   @return [string $url, string $ret_value] - [url, сгенерированное значение поля полнотекстового поиска]
	   
2.2) пример реализации данной технологии:

class UserFullTextSearch {
	public function getFullTextSearchStructure() {
		$this->addInfo('yz_cat3', ['yz_list4'], 'buildCat3');
		//$this->addInfo('yz_list5', ['yz_list48'], 'buildList5');
		//$this->addInfo('yz_cat8', ['yz_ord3', 'yz_list2'], 'buildCat8');
	}
	public function buildCat3(array $thisRecord):array {
	    /** пусть у yz_cat3 ключ id
		      $tableName - это yz_cat3
		      поле yz_cat3.txt_res_trans - транслит поля txt
			  также включаются в поиск поля yz_cat3.description и yz_cat3.txt
			  
			  пусть таблица yz_list4 - следующая по вложенности после yz_cat3 (вложенная в нее) и пусть нам нужны поля
			  yz_list4.item и yz_list4.name
		*/	  
		$s = $thisRecord['txt'] . ' ' . $thisRecord['description'];
		$results = DB::select("select item, name from yz_list4 where parent_id = ? order by ordr", [$thisRecord['id]]);
		foreach ($results as $result) {
			$s .= ' ' . $result->item . ' ' . $result->name;
		}
		$url = 'item/' . $thisRecord['txt_res_trans'];
		return [$url, $s];
	}
}

3) также предусмотреть artisan job для всех таблиц всей БД и с параметром --table=yz_cat4 (только для данной таблицы)
    
4) сделать возможность для ord таблиц указывать unique index

5) сделать при редактировании таблицы хук onShow() с указанием, до, после или вместо label или поля редактирования
     вставлять код переданный этим хуком
6) в следующих версиях несттаба: для индексации (полнотекстового поиска) по записям - добавить поле типа "address" : 
это 2 поля в таблице, в первом содержится адрес записи на итоговом сайте, в виде "{one2.name}/{name}" например.
 в случае, если такое поле или такая таблица в очереди родительских таблиц не найдена, при сохранении или удалении
  записи запись не сохраняется и выводится ошибка
 2-е поле: так же как и в первом, в нем могут использоваться имена полей таблиц : "catalog?id={id}&parent_id={ord4.id}"
  (путь относительно корня сайта)
 - полей такого типа (address) для каждой записи может быть несколько, например, для нескольких языковых версий сайта
 